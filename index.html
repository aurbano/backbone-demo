<!DOCTYPE html>
<html>
	<head>
		<title>Backbone demo</title>
		<link rel="stylesheet" href="css/demo.css" type="text/css" media="screen" />
		
		<!-- Base libraries -->
		<script type="text/javascript" src="lib/jquery.js"></script>
		<script type="text/javascript" src="lib/underscore.js"></script>
		<script type="text/javascript" src="lib/json2.js"></script>
		<script type="text/javascript" src="lib/backbone.js"></script>
		<script type="text/javascript" src="lib/mustache.js"></script>
		
		<!-- Embedded templates -->
		<script type="text/jquery-x-template" id="comment-template">
			<button class="edit">Edit</button>
			<button class="delete">Delete</button>
			<button class="reverse">Reverse text</button>
			<strong>{{author}}</strong><br />
			{{{text}}}
		</script>
		<script type="text/jquery-x-template" id="form-template">
			<strong>Comment edit</strong>
			<form>
				<input type="text" name="author" value="{{author}}" placeholder="Author name" class="author" /><br />
				<textarea name="text" placeholder"Comment text" class="text">{{text}}</textarea>
				<button class="submit"> Submit </button>
				<button class="cancel"> Cancel </button>
			</form>
		</script>
		<!-- Require.js -->
		<script type="text/javascript" src="lib/require.js"></script>
	</head>
	<body>
		<!-- Application container element -->
		<div id="application">
			<a href="#" class="newcomment button">Create new comment</a>
			<a href="#" class="randomcomment button">Create random comments</a>
			<ul class="commentlist">
				<!-- Pre-rendered comments -->
				<li class="comment">
					<button class="edit">Edit</button>
					<button class="delete">Delete</button>
					<button class="reverse">Reverse text</button>
					<strong>serif</strong><br>
					Prerendered comment 5
				</li><li class="comment">
					<button class="edit">Edit</button>
					<button class="delete">Delete</button>
					<button class="reverse">Reverse text</button>
					<strong>serif</strong><br>
					Prerendered comment 4
				</li><li class="comment">
					<button class="edit">Edit</button>
					<button class="delete">Delete</button>
					<button class="reverse">Reverse text</button>
					<strong>serif</strong><br>
					Prerendered comment 3
				</li><li class="comment">
					<button class="edit">Edit</button>
					<button class="delete">Delete</button>
					<button class="reverse">Reverse text</button>
					<strong>serif</strong><br>
					Prerendered comment 2
				</li><li class="comment">
					<button class="edit">Edit</button>
					<button class="delete">Delete</button>
					<button class="reverse">Reverse text</button>
					<strong>serif</strong><br>
					Prerendered comment 1
				</li>
			</ul>
		</div>
		<!-- Application init -->
		<script type="text/javascript" charset="utf-8">
			// Basic configuration
			// I decided to include full paths here for flexibility
			requirejs.config({
				'paths': {
					// Main app
					'app': 'js/app/app',
					// Models
					'commentcollection' : 'js/model/commentcollection',
					'commentmodel' : 'js/model/commentmodel',
					// Views
					'commentview' : 'js/view/commentview',
					'formview' : 'js/view/formview',
					'listview' : 'js/view/listview',
					'newbuttonview' : 'js/view/newbuttonview',
					'randombuttonview' : 'js/view/randombuttonview',
					// Libraries
					'jquery': 'lib/jquery',
					'underscore': 'lib/underscore',
					'backbone': 'lib/backbone',
					'mustache': 'lib/mustache',
				},
				// Configure the libraries
				'shim': {
					'underscore': {
						'exports': '_'
					},
					'backbone': {
						'deps': ['jquery', 'underscore'],
						'exports': 'Backbone'
					},
					'mustache' : {
						'exports' : 'Mustache'
					}
				}
			});
			// This would probably be better in main.js
			// but I'm maintaining the original structure
			require(['app'], function(App) {
				new App({
					el: $('#application')
				});
			});
		</script>
	</body>
</html>
